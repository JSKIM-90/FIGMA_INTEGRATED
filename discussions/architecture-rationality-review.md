# 아키텍처 설계 합리성 검토

> 작성일: 2025-12-15

## 개요

20년차 글로벌 IT 기업 시니어 소프트웨어 개발자 관점에서, 현재 프로젝트의 구조, 작업 흐름, 런타임 아키텍처 설계에 대한 합리성 검토.

---

## 검토 대상

1. Figma → 컴포넌트 워크플로우
2. RNBT 런타임 아키텍처 설계
3. front 소스코드와의 관계

---

## 1. Figma → 컴포넌트 워크플로우

### 프로세스

```
┌─────────────────────────────────────────────────────────────┐
│  Figma_Conversion                                           │
│                                                              │
│  Figma MCP (get_screenshot, get_metadata, get_design_context)│
│       ↓                                                      │
│  HTML, CSS 생성                                              │
│       ↓                                                      │
│  Playwright 스크린샷                                         │
│       ↓                                                      │
│  원본 Figma 스크린샷과 비교                                   │
│       ↓                                                      │
│  차이 있으면 수정 → 반복                                      │
│       ↓                                                      │
│  ✅ 정적 HTML, CSS + 검증된 스크린샷                         │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│  RNBT_architecture                                          │
│                                                              │
│  HTML, CSS + 스크린샷 참고                                   │
│       ↓                                                      │
│  컴포넌트 구조 생성 (register.js, destroy.js 등)             │
│       ↓                                                      │
│  Chart는 스크린샷 기반으로 옵션 추론                          │
│       ↓                                                      │
│  preview.html로 검증                                         │
│       ↓                                                      │
│  ✅ 동적 컴포넌트 완성                                       │
└─────────────────────────────────────────────────────────────┘
```

### 검토 결과

**초기 우려:**
- 자동화 수준이 낮고, 재현성이 불확실하며, 스케일링이 불가능하다고 판단

**재검토 후 결론:**

| 항목 | 결론 |
|------|------|
| 자동화 | Claude Code + CLAUDE.md = 지능형 자동화 도구 |
| 재현성 | Playwright 스크린샷 비교로 출력 품질 보장 |
| 스케일링 | Claude Code 숙련자 수에 비례하여 가능 |
| 효율성 | "링크 한 줄로 컴포넌트 구현" 가능 |

**차트 컴포넌트의 경우:**
- 데이터 구조(필드명, API 응답)는 Figma에서 추론 불가
- 시각적 형태(시리즈, 색상, 범례)는 스크린샷으로 파악 가능
- ECharts 옵션을 스크린샷 기반으로 추론 가능

---

## 2. RNBT 런타임 아키텍처 설계

### 핵심 설계 원칙

| 원칙 | 내용 | 합리성 |
|------|------|--------|
| **Primitive Building Blocks** | 프레임워크는 최소한만 제공, 조합은 사용자 | ✅ Unix 철학과 일맥상통 |
| **역할 분리** | Page=오케스트레이터, Component=독립적 구독자 | ✅ 관심사 분리 |
| **Topic 기반 Pub-Sub** | 느슨한 결합, 컴포넌트 독립성 | ✅ 검증된 패턴 |
| **라이프사이클 1:1 매칭** | 생성한 것은 반드시 정리 | ✅ 메모리 관리 기본 원칙 |
| **Guard Clause** | 외부 라이브러리만 try-catch | ✅ 에러 처리 명확 |

### 검토 결과

**설계에서 발견되는 비합리성:** 없음

- 패턴들이 서로 충돌하지 않음
- 복잡도가 적절함
- 확장 가능한 구조

### 검증 방식

> "설계가 합리적이면 프로덕션에서 검증하면 된다."

- 완벽한 검증 후 시작은 비현실적
- 프로젝트 진행 전에는 설계의 합리성이 우선
- 엣지 케이스(동시성, 순환참조, 대규모 데이터)는 프로덕션에서 발견 시 보완

---

## 3. front 소스코드와의 관계

### 레이어 구분

```
┌─────────────────────────────────────────────────────────────┐
│  front (웹 빌더 프레임워크)                                   │
│                                                              │
│  PureMVC, Vue 2.5, Webpack                                   │
│  → 이것은 "도구"                                             │
│  → 에디터/뷰어를 만드는 코드                                  │
│                                                              │
│  제공하는 것:                                                 │
│  - 라이프사이클 (before_load, loaded, before_unload)         │
│  - window.wemb (fx, WEventBus, GlobalDataPublisher, WKit)   │
└─────────────────────────────────────────────────────────────┘
                              │
                              │ 실행/호스팅
                              ▼
┌─────────────────────────────────────────────────────────────┐
│  런타임 컴포넌트 코드 (RNBT_architecture 설계 대상)           │
│                                                              │
│  순수 HTML, CSS, JavaScript                                  │
│  → 이것은 "결과물"                                           │
│  → 웹 빌더가 만들어내고 실행하는 코드                         │
│                                                              │
│  사용하는 것:                                                 │
│  - front가 제공한 window.wemb API                            │
│  - front가 호출하는 라이프사이클                              │
└─────────────────────────────────────────────────────────────┘
```

### 검토 결과

**초기 우려:**
- front의 PureMVC/Vue와 RNBT의 순수 JavaScript 간 괴리

**재검토 후 결론:**
- **레이어가 다름**: front는 도구, RNBT는 결과물
- **비교 대상이 아님**: front의 내부 구현과 RNBT 패턴은 다른 레이어
- **인터페이스는 이미 정의됨**: `window.wemb`로 API 노출, 라이프사이클 호출
- **호환성 문제 없음**: RNBT 코드는 front가 제공하는 것만 사용

---

## 최종 결론

### 설계 합리성

```
┌─────────────────────────────────────────────────────────────┐
│  설계 합리성: ✅ 충분히 합리적                               │
│  Figma 워크플로우: ✅ 프로세스 가능                          │
│  프로젝트 진행 가능 여부: ✅                                  │
└─────────────────────────────────────────────────────────────┘
```

### 프로덕션에서 검증할 사항

1. 복잡한 컴포넌트에서 "링크 한 줄" 워크플로우 유효성
2. Figma 디자인 품질이 낮을 때 대응 방안
3. 엣지 케이스 (동시성, 순환참조, 대규모 데이터)
4. 팀 온보딩 시간 및 Claude Code 숙련도 요구 수준

---

## 핵심 인사이트

### Claude Code 시대의 자동화

```
전통적 자동화: 입력 → 결정론적 스크립트 → 출력
Claude Code 자동화: 입력 + 지침(CLAUDE.md) → AI → 검증(Playwright) → 출력
```

### 설계 검증 방식

> "설계가 합리적이면 프로덕션에서 검증하면 된다."
> "프로젝트 진행 전에는 설계의 합리성이 우선이다."

---

*이 문서는 향후 설계 합리성 검토의 기준으로 활용됩니다.*
