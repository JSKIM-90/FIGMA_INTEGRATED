# 컴포넌트 설계 원칙

> 작성일: 2025-12-15

## 개요

웹 빌더에서 재사용 가능한 컴포넌트를 만들기 위한 설계 원칙.

20년차 시니어 소프트웨어 개발자 관점에서 검토 완료.

---

## 핵심 원칙

### 1. 컴포넌트는 외부에 영향을 주는 단독 행동을 해서는 안 된다

**문제:**
```
컴포넌트가 단독 행동
    ↓
다른 컴포넌트와 상호작용 코드 스며듦
    ↓
재사용 불가능
```

**원칙:**
- 컴포넌트는 자기 경계 안에서는 자유
- 경계 밖으로는 이벤트 발생만

---

### 2. "기능 있는 컴포넌트"의 함정

| 목적 | 컴포넌트 설계 |
|------|--------------|
| 데모/쇼케이스 | 단독 기능 OK (일회성) |
| **실제 도메인 구축** | 단독 기능 ❌ (재사용 필수) |

**웹 빌더의 가치는 실제 도메인을 빠르게 구축하는 것.**

데모용이면 그냥 코드로 짜면 됩니다. 웹 빌더를 쓸 이유가 없습니다.

---

## 컴포넌트 구성

```
컴포넌트 = 프로퍼티 + 메소드 + 이벤트 + (3D) 데이터 정보
```

| 구성 요소 | 역할 |
|----------|------|
| 프로퍼티 | 상태 (state) |
| 메소드 | 행동 (behavior) |
| 이벤트 | 통신 (communication) |
| 데이터 정보 | (3D) 데이터셋 참조 메타데이터 |

---

## 컴포넌트의 기능

> **컴포넌트의 기능 = 메소드 + 페이지에 전달할 이벤트**

| 기능 | 설명 |
|------|------|
| 메소드 | 컴포넌트가 **할 수 있는 것** (자기 경계 안에서) |
| 이벤트 | 컴포넌트가 **알릴 수 있는 것** (Page에게) |

---

## 메소드 설계 원칙

### 허용 기준

> **외부 컴포넌트에 영향을 미치지 않으면 허용**

| 메소드 | 외부 영향 | 허용 |
|--------|----------|------|
| `renderData(response)` | ❌ 자기 DOM만 | ✅ |
| `toggleSeries(index)` | ❌ 자기 차트만 | ✅ |
| `sortTable(column)` | ❌ 자기 테이블만 | ✅ |
| `playAnimation()` | ❌ 자기 DOM만 | ✅ |
| `fetch('/api/data')` | ✅ 외부 API | ❌ |
| `otherComponent.update()` | ✅ 다른 컴포넌트 | ❌ |
| `GlobalDataPublisher.fetchAndPublish()` | ✅ 외부 시스템 | ❌ |

### Method should be public 원칙

```
메소드
├── public: Page(외부)가 호출
└── private: public이 내부적으로 호출 (지양)
```

**private 지양 이유:**
- private이 많으면 → 컴포넌트가 너무 많은 일을 하고 있다는 신호
- 복잡한 로직이 필요하면 → Page 또는 유틸리티로 분리
- 컴포넌트는 단순해야 함 → public만으로 충분해야 함

```
┌─────────────────────────────────────────────────────────────┐
│  private이 필요하다면:                                       │
│  → 컴포넌트가 너무 많은 일을 하고 있는 것                    │
│  → 로직을 Page나 유틸리티로 분리 검토                        │
└─────────────────────────────────────────────────────────────┘
```

---

## 역할 분리

| 역할 | 컴포넌트 | Page |
|------|----------|------|
| 데이터 fetch | ❌ | ✅ fetchAndPublish |
| 다른 컴포넌트 참조 | ❌ | ✅ 오케스트레이터 |
| 이벤트 처리 | ❌ 발생만 | ✅ 핸들링 |
| 데이터 구독 | ✅ 수동적 | - |
| 메소드 실행 | ✅ 자기 경계 내 | ✅ 호출자 |

---

## 올바른 컴포넌트 설계

```
컴포넌트 = 순수한 뷰 (Pure View)

입력: 데이터 (Topic 구독)
출력: 렌더링 + 이벤트 발생

┌─────────────────┐
│   Component     │
│                 │
│  data ───→ 렌더링 (메소드)
│                 │
│  사용자 액션 ───→ 이벤트 발생 (@clicked)
│                 │
│  Page 호출 ───→ 메소드 실행
│                 │
│  ❌ fetch 없음   │
│  ❌ 다른 컴포넌트 참조 없음
│  ❌ 비즈니스 로직 없음
│  ❌ 불필요한 private 없음
└─────────────────┘
```

---

## 검토 결과

| 원칙 | 검토 결과 |
|------|----------|
| 외부 영향 없으면 허용 | ✅ 합리적 |
| 기능 = 메소드 + 이벤트 | ✅ 합리적 |
| Method should be public | ✅ 합리적 |
| 컴포넌트 단순성 유지 | ✅ 합리적 |

**20년차 시니어 개발자 검토: 모든 원칙이 합리적임**

---

*이 문서는 컴포넌트 설계의 기준으로 활용됩니다.*
